<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR –ì–∞–ª–µ—Ä–µ—è</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            font-family: Arial, sans-serif;
        }
        .loading { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            color: white; 
            z-index: 1000;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .instruction {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            z-index: 1000;
            background: rgba(0,0,0,0.5);
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="instruction" id="instruction">
        üì± –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä Hiro
    </div>
    
    <div class="loading" id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞...</div>
    
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- –ú–∞—Ä–∫–µ—Ä Hiro -->
          <a-marker 
            type="pattern" 
            url="https://raw.githubusercontent.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/trex-pattern/pat-ttrex.patt"
            emitevents="true"
            cursor="fuse: false;"
            id="marker"
        >
            <a-entity id="content-container"></a-entity>
        </a-marker>
        
    
        
    </a-scene>

    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–∞
        async function loadContent() {
            try {
                const response = await fetch('./data.json');
                const data = await response.json();
                return data.content;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                return [];
            }
        }

        // –°–æ–∑–¥–∞–µ–º AR –∫–æ–Ω—Ç–µ–Ω—Ç
        async function createARContent() {
            const content = await loadContent();
            const container = document.getElementById('content-container');
            
            if (content.length === 0) {
                document.getElementById('loading').innerHTML = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö';
                return;
            }
            
            content.forEach((item, index) => {
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
                const yPosition = 1.5 - (index * 1.2); // –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
                
                // –°–æ–∑–¥–∞–µ–º –ø–ª–æ—Å–∫–æ—Å—Ç—å —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π
                const photoPlane = document.createElement('a-plane');
                photoPlane.setAttribute('src', item.imageUrl);
                photoPlane.setAttribute('position', `0 ${yPosition} 0`);
                photoPlane.setAttribute('scale', item.scale || '1 0.75 1');
                photoPlane.setAttribute('class', 'clickable');
                
                // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ–¥ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π
                const textEntity = document.createElement('a-text');
                textEntity.setAttribute('value', `${item.title}\n${item.description}`);
                textEntity.setAttribute('position', `0 ${yPosition - 0.8} 0`);
                textEntity.setAttribute('align', 'center');
                textEntity.setAttribute('color', '#FFFFFF');
                textEntity.setAttribute('width', '2.5');
                textEntity.setAttribute('wrap-count', '20');
                
                container.appendChild(photoPlane);
                container.appendChild(textEntity);
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('loading').style.display = 'none';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                document.getElementById('instruction').style.display = 'none';
            }, 5000);
        }

        // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ A-Frame
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            
            scene.addEventListener('loaded', function() {
                createARContent();
            });
        });
    </script>
</body>
</html>
